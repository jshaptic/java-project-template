task verifyVersion(group: "verification") {
	description "Verifies current project version"
	doLast {
		if (System.getenv('TRAVIS_BRANCH') == System.getenv('PROD_BRANCH')) {
			if (project.version.endsWith("SNAPSHOT")) {
				println "\r\n!!! Version format '${project.version}' is not valid for production"
				println "!!! Most probably SNAPSHOT prefix wasn't removed from version number\r\n"
			}
		}
	}
}

task masterDeploy(group: "deployment") {
	description "Publishes assembled artifacts to JFrog's OSS Artifactory"
	if (System.getenv('CI') == "true" && System.getenv('TRAVIS') == "true")
		dependsOn artifactoryPublish
	else 
		doLast {
			println "\r\n!!! This task is supposed to be run only in CI environment\r\n"
		}
}

task productionDeploy(group: "deployment") {
	description "Publishes production ready artifacts to Bintray repository"
	if (System.getenv('CI') == "true" && System.getenv('TRAVIS') == "true") {
		if (!project.version.endsWith("SNAPSHOT")) {
			dependsOn bintrayUpload
			doLast {
				System.setenv('TRAVIS_TAG', "v${project.version}")
			}
		}
		else
			doLast {
				println "\r\n!!! Project with version '${project.version}' can be deployed only to snapshot repository"
				println "!!! Most probably SNAPSHOT prefix wasn't removed from version number\r\n"
			}
	}
	else
		doLast {
			println "\r\n!!! This task is supposed to be run only in CI environment\r\n"
		}
}