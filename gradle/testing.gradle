test {
	// Rearrange test classpath, add compiled JAR instead of main classes directory
	if (project.getProperties().get("RUN_MODE") == "CI") {
		classpath = files(jar.archiveFile) + sourceSets.test.output + configurations.testRuntimeClasspath
	}
	
	// Select testing framework
	useTestNG()
	
	// Setup verbosity
	testLogging {
		exceptionFormat "full"
		events "skipped", "failed"
	}
}

// Setup jacoco task, reports should be generated in XML format, which is required for codecov task
jacocoTestReport {
	dependsOn test
	reports {
		xml.enabled = true
    }
}