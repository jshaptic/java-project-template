test {
	
	// Add dependency on jar task, since testing will be executed against freshly made JAR file
	dependsOn jar
	
	// Rearrange test classpath, add compiled JAR instead of main classes
	classpath = project.sourceSets.test.output + configurations.testRuntimeClasspath + files(jar.archiveFile)
	
	useTestNG()
	
	testLogging {
		exceptionFormat "full"
		events "skipped", "failed"
	}
}

jacocoTestReport {
	reports {
		
		// For coveralls task jacoco xml report should be turned on
		xml.enabled = true
    }
}